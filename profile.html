<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meu Perfil - Educação para Todos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'azul-escuro': '#1E3A8A',
                        'azul-claro': '#3B82F6',
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap');
        body { font-family: 'Poppins', sans-serif; background-color: #f0f7ff; }
        #bottom-nav-bar .nav-item.active i, #bottom-nav-bar .nav-item.active span { color: #1E3A8A; }
    </style>
</head>
<body class="max-w-md mx-auto bg-gray-50 min-h-screen pb-20">

    <header class="bg-azul-escuro text-white p-4">
        <div class="flex items-center">
            <a href="home.html" class="mr-4">
                <i class="fas fa-arrow-left"></i>
            </a>
            <h1 class="text-xl font-bold">Meu Perfil</h1>
        </div>
    </header>
    
    <main class="p-4">
        <div class="bg-white rounded-xl shadow-md overflow-hidden">
            <div class="p-6 text-center">
                <div class="mx-auto w-24 h-24 rounded-full bg-azul-claro flex items-center justify-center mb-4">
                    <i class="fas fa-user text-white text-4xl"></i>
                </div>
                <h2 id="user-name" class="text-2xl font-bold text-gray-800"></h2>
                <p id="user-email" class="text-gray-600"></p>
                <p id="user-location" class="text-gray-500 text-sm mt-2"></p>
            </div>
            
            <div class="border-t border-gray-100 p-6">
                <button onclick="openEditProfileModal()" class="w-full bg-azul-escuro text-white py-3 rounded-lg font-semibold mb-3 hover:bg-azul-claro transition">
                    <i class="fas fa-edit mr-2"></i> Editar Perfil
                </button>
                
                <button onclick="openLogoutModal()" class="w-full bg-white text-red-500 border border-red-500 py-3 rounded-lg font-semibold hover:bg-red-50 transition">
                    <i class="fas fa-sign-out-alt mr-2"></i> Sair
                </button>
            </div>
        </div>
        
        <div class="mt-6 bg-white rounded-xl shadow-md p-6">
            <h3 class="text-lg font-bold text-gray-800 mb-4">Minhas Estatísticas</h3>
            
            <div class="grid grid-cols-2 gap-4">
                <div class="bg-azul-escuro bg-opacity-10 p-4 rounded-lg text-center">
                    <div id="stats-donated" class="text-3xl font-bold text-azul-escuro">0</div>
                    <div class="text-gray-600 text-sm">Livros Doados</div>
                </div>
                
                <div class="bg-azul-escuro bg-opacity-10 p-4 rounded-lg text-center">
                    <div id="stats-received" class="text-3xl font-bold text-azul-escuro">0</div>
                    <div class="text-gray-600 text-sm">Livros Recebidos</div>
                </div>
            </div>
        </div>
    </main>

    <div id="bottom-nav-bar"
        class="fixed bottom-0 left-0 right-0 w-full max-w-md mx-auto bg-white shadow-lg border-t border-gray-200">
        <div class="grid grid-cols-5 py-3">
            <a href="home.html" class="flex flex-col items-center nav-item">
                <i class="fas fa-home text-gray-400 text-xl"></i>
                <span class="text-xs mt-1 text-gray-400">Início</span>
            </a>
            <a href="donate.html" class="flex flex-col items-center nav-item">
                <i class="fas fa-book text-gray-400 text-xl"></i>
                <span class="text-xs mt-1 text-gray-400">Doar</span>
            </a>
            <a href="search.html" class="flex flex-col items-center nav-item">
                <i class="fas fa-search text-gray-400 text-xl"></i>
                <span class="text-xs mt-1 text-gray-400">Buscar</span>
            </a>
            <a href="mybooks.html" class="flex flex-col items-center nav-item">
                <i class="fas fa-book-open text-gray-400 text-xl"></i>
                <span class="text-xs mt-1 text-gray-400">Meus Livros</span>
            </a>
            <a href="profile.html" class="flex flex-col items-center nav-item active">
                <i class="fas fa-user text-xl"></i>
                <span class="text-xs mt-1">Perfil</span>
            </a>
        </div>
    
    <div id="edit-profile-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-40">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-sm">
            <form id="edit-profile-form" class="p-6">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">Editar Perfil</h3>
                <div class="mb-4">
                    <label class="block text-gray-700 mb-2 text-sm">Nome</label>
                    <input type="text" id="edit-name" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-azul-claro">
                </div>
                 <div class="mb-4">
                    <label class="block text-gray-700 mb-2 text-sm">E-mail</label>
                    <input type="email" id="edit-email" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-azul-claro">
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 mb-2 text-sm">Localização</label>
                    <input type="text" id="edit-location" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-azul-claro" placeholder="Cidade, Estado">
                </div>
                <div class="flex space-x-2 mt-6">
                    <button type="button" onclick="closeEditProfileModal()" class="flex-1 bg-gray-200 text-gray-800 py-2 rounded-lg font-medium">Cancelar</button>
                    <button type="submit" class="flex-1 bg-azul-escuro text-white py-2 rounded-lg font-medium">Salvar Alterações</button>
                </div>
            </form>
        </div>
    </div>
    
    <div id="logout-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-40">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-sm p-6 text-center">
            <h3 class="text-lg font-semibold text-gray-800">Confirmar Saída</h3>
            <p class="text-gray-600 mt-2 mb-6">Você tem certeza que deseja sair da sua conta?</p>
            <div class="flex space-x-2">
                <button onclick="closeLogoutModal()" class="flex-1 bg-gray-200 text-gray-800 py-2 rounded-lg font-medium">Cancelar</button>
                <a href="index.html" class="flex-1 block bg-red-600 text-white py-2 rounded-lg font-medium">Sim, Sair</a>
            </div>
        </div>
    </div>

<script>
// --- DADOS SIMULADOS (consistente com mybooks.html) ---
let userData = {
    name: 'Maria Silva',
    email: 'maria@exemplo.com',
    location: 'Campo Grande, MS',
    avatar: 'https://i.pravatar.cc/150?u=maria' // Placeholder para imagem de perfil
};

let myDonations = [
    { id: 1, title: 'O Pequeno Príncipe', author: 'Antoine de Saint-Exupéry', status: 'Disponível', type: 'Doação' },
    { id: 2, title: 'A Revolução dos Bichos', author: 'George Orwell', status: 'Reservado', type: 'Venda' },
    { id: 3, title: 'A Arte da Guerra', author: 'Sun Tzu', status: 'Vendido/Doado', type: 'Doação' }
];

let myRequests = [
    { id: 4, title: 'Dom Casmurro', author: 'Machado de Assis', status: 'Aprovado' },
    { id: 5, title: '1984', author: 'George Orwell', status: 'Aguardando Envio' },
    { id: 6, title: 'Sapiens', author: 'Yuval Noah Harari', status: 'Entregue' }
];

// --- ELEMENTOS DO DOM ---
const page = {
    name: document.getElementById('user-name'), email: document.getElementById('user-email'),
    location: document.getElementById('user-location'), avatar: document.getElementById('user-avatar'),
    joinDate: document.getElementById('user-join-date'), statsDonated: document.getElementById('stats-donated'),
    statsReceived: document.getElementById('stats-received')
};
const editModal = {
    modal: document.getElementById('edit-profile-modal'), form: document.getElementById('edit-profile-form'),
    name: document.getElementById('edit-name'), email: document.getElementById('edit-email'),
    location: document.getElementById('edit-location')
};
const logoutModal = document.getElementById('logout-modal');

// --- FUNÇÃO DE RENDERIZAÇÃO ---
function renderProfile() {
    // Preenche informações do usuário
    page.name.textContent = userData.name;
    page.email.textContent = userData.email;
    page.location.textContent = userData.location;
    page.avatar.src = userData.avatar;
    page.joinDate.textContent = `Membro desde: ${userData.joinDate}`;

    // Calcula e preenche estatísticas
    const donatedCount = myDonations.filter(b => b.status === 'Vendido/Doado').length;
    const receivedCount = myRequests.filter(b => b.status === 'Entregue').length;
    page.statsDonated.textContent = donatedCount;
    page.statsReceived.textContent = receivedCount;
}

// --- LÓGICA DOS MODAIS ---

// Editar Perfil
function openEditProfileModal() {
    editModal.name.value = userData.name;
    editModal.email.value = userData.email;
    editModal.location.value = userData.location;
    editModal.modal.classList.remove('hidden');
}
function closeEditProfileModal() {
    editModal.modal.classList.add('hidden');
}
editModal.form.addEventListener('submit', (e) => {
    e.preventDefault();
    // Atualiza os dados do usuário com os valores do formulário
    userData.name = editModal.name.value;
    userData.email = editModal.email.value;
    userData.location = editModal.location.value;
    
    // Re-renderiza o perfil para mostrar as alterações e fecha o modal
    renderProfile();
    closeEditProfileModal();
});

// Logout
function openLogoutModal() {
    logoutModal.classList.remove('hidden');
}
function closeLogoutModal() {
    logoutModal.classList.add('hidden');
}

// --- INICIALIZAÇÃO ---
document.addEventListener('DOMContentLoaded', renderProfile);

</script>

</body>
</html>